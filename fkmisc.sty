% ================================================================== %
%                                                                    %
%                         Requirement Things                         %
%                                                                    %
% ================================================================== %

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{fkmisc}[2018/11/23 v0.01 misc macro package]
%% Just to be extra clear: called fkmisc because those are my
%% initials. Not an explitive. I guess it is a little weird to brand
%% software with my own name, though. I just couldn't think of
%% anything else that wasn't tacky.



% ================================================================== %
%                                                                    %
%                              Packages                              %
%                                                                    %
% ================================================================== %

% For code listings
\RequirePackage{listings}

% So that you can insert easy IPA transcriptions of things
% OK --- for some indiscernable reason, this conflicts with
% fkmath.sty? Not really sure what to do about that.
% \RequirePackage{tipa}

% For link customization
% \RequirePackage{hyperref}

% For defining an okina command
\usepackage{newunicodechar,graphicx}

% ================================================================== %
%                                                                    %
%                               Macros                               %
%                                                                    %
% ================================================================== %


% \newcommand{\ipa}[1]{[\textipa{#1}]}

\DeclareRobustCommand{\okina}{%
  \raisebox{\dimexpr\fontcharht\font`A-\height}{%
    \scalebox{0.8}{`}%
  }%
}
\newunicodechar{Ê»}{\okina}



% ================================================================== %
%                                                                    %
%                          Misc. Formattings                         %
%                                                                    %
% ================================================================== %

% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal

% For code styling below
\colorlet{mygreen}{green!40!black}
\definecolor{numgray}{rgb}{0.5,0.5,0.5}
\definecolor{mygray}{rgb}{.6,.6,.6}

% Apparently can't have newlines in the lstset portion lol
\newcommand{\pythonstyle}{\lstset{
  % Colors and stuff
  backgroundcolor=\color{white},     % choose the background color
  basicstyle=\footnotesize\ttfamily, % set size + style of font
  %
  commentstyle=\color{mygray},% comment style
  identifierstyle=\color{blue},
  keywordstyle=\color{mygreen},      % keyword style
  stringstyle=\color{orange},        % string literal style
  %
  % Whitespace handling
  breakatwhitespace=false,           %
  breaklines=true,                   % sets automatic line breaking
  keepspaces=true,                   % needs (columns=flexible)?
  showspaces=false,                  % Don't add weird underscores
  showstringspaces=false,            % Same
  showtabs=false,                    % Same
  tabsize=4,	                       % 1 tab = 4 spaces
  xleftmargin=2em,                   % Properly indent listing
  %
  % Caption
  belowcaptionskip=1\baselineskip,   % Spacing to caption
  captionpos=b,                      % caption at bottom
  title=\lstname,                    % show fname w/ \lstinputlisting
  %
  % Height below
  belowskip=-1cm,
  %
  % Framing & Numbering
  frame=L,	                     % adds a frame on the left
  numbers=left,                      % linum loc. (none, left, right)
  numbersep=10pt,                    % distance of linum to code
  numberstyle=\tiny\color{numgray},  % style used for the line-numbers
  rulecolor=\color{black},           %
  stepnumber=1,                      % number every line
  %
  % Misc
  language=Python,                   % default language
}}

% Python environment
\lstnewenvironment{pythoncode}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}


% LaTeX Language support
\lstset{language=[LaTeX]TeX,
  % Colors and stuff
  backgroundcolor=\color{white},     % choose the background color
  basicstyle=\footnotesize\ttfamily, % set size + style of font
  %
  commentstyle=\color{mygray},       % comment style
  identifierstyle=\color{blue},
  keywordstyle=\color{mygreen},      % keyword style
  stringstyle=\color{orange},        % string literal style
  %
  % Whitespace handling
  breakatwhitespace=false,           %
  breaklines=true,                   % sets automatic line breaking
  keepspaces=true,                   % needs (columns=flexible)?
  showspaces=false,                  % Don't add weird underscores
  showstringspaces=false,            % Same
  showtabs=false,                    % Same
  tabsize=2,	                       % 1 tab = 2 spaces
  xleftmargin=2em,                   % Properly indent listing
  %
  % Height below
  belowskip=-1cm,
  %
  % Caption
  belowcaptionskip=1\baselineskip,   % Spacing to caption
  captionpos=b,                      % caption at bottom
  title=\lstname,                    % show fname w/ \lstinputlisting
  %
  % Framing & Numbering
  frame=L,	                         % adds a frame on the left
  numbers=left,                      % linum loc. (none, left, right)
  numbersep=10pt,                    % distance of linum to code
  numberstyle=\tiny\color{numgray},  % style used for the line-numbers
  rulecolor=\color{black},           %
  stepnumber=1,                      % number every line
  %
  % Misc
  language=[LaTeX]Tex,                   % default language
  % texcsstyle=*\bf\color{blue},
  % otherkeywords={$, \{, \}, \[, \]},
}